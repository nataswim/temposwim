{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/admin/uploads/UploadFormPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FaArrowLeft, FaSave, FaUpload, FaImage, FaFile, FaVideo, FaMusic, FaTrash } from 'react-icons/fa';\nimport { getUpload, createUpload, updateUpload } from '../../../services/uploads';\nimport { getUsers } from '../../../services/users';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UploadFormPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n\n  // Form state\n  const [formData, setFormData] = useState({\n    filename: '',\n    type: '',\n    user_id: '',\n    file: null\n  });\n\n  // UI states\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [users, setUsers] = useState([]);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Load upload data if in edit mode\n   * ðŸ‡«ðŸ‡· Charger les donnÃ©es du fichier si en mode Ã©dition\n   */\n  useEffect(() => {\n    const fetchUpload = async () => {\n      if (isEditMode) {\n        try {\n          setLoading(true);\n          const response = await getUpload(id);\n          const uploadData = response.data;\n          console.log('DonnÃ©es du fichier chargÃ©es:', uploadData);\n          setFormData({\n            filename: uploadData.filename || '',\n            type: uploadData.type || '',\n            user_id: uploadData.user_id ? uploadData.user_id.toString() : '',\n            file: null\n          });\n\n          // Set preview for images\n          if (uploadData.type === 'image' && uploadData.url) {\n            setPreview(uploadData.url);\n          }\n          setLoading(false);\n        } catch (err) {\n          console.error('Error loading upload:', err);\n          setError('Error loading file data');\n          setLoading(false);\n        }\n      }\n    };\n    fetchUpload();\n  }, [id, isEditMode]);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Load users\n   * ðŸ‡«ðŸ‡· Charger les utilisateurs\n   */\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await getUsers();\n        setUsers(response.data);\n      } catch (err) {\n        console.error(\"Error fetching users:\", err);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Handle file selection\n   * ðŸ‡«ðŸ‡· GÃ©rer la sÃ©lection de fichier\n   */\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = {\n      'image/jpeg': 'image',\n      'image/png': 'image',\n      'image/gif': 'image',\n      'video/mp4': 'video',\n      'audio/mpeg': 'audio',\n      'application/pdf': 'document'\n    };\n    if (!allowedTypes[file.type]) {\n      setError('Type de fichier non supportÃ©');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (file.size > maxSize) {\n      setError('Le fichier est trop volumineux (max 5MB)');\n      return;\n    }\n    setFormData(prev => ({\n      ...prev,\n      file: file,\n      filename: file.name,\n      type: allowedTypes[file.type]\n    }));\n\n    // Create preview for images\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n\n    // Clear any previous errors\n    setError(null);\n  };\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Handle form submission\n   * ðŸ‡«ðŸ‡· GÃ©rer la soumission du formulaire\n   */\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const formPayload = new FormData();\n      formPayload.append('filename', formData.filename);\n      formPayload.append('type', formData.type);\n      formPayload.append('user_id', formData.user_id);\n      if (formData.file) {\n        formPayload.append('file', formData.file);\n      }\n\n      // Debugging - log FormData content\n      for (let pair of formPayload.entries()) {\n        console.log(`${pair[0]}: ${pair[1]}`);\n      }\n      if (isEditMode) {\n        await updateUpload(id, formPayload);\n      } else {\n        await createUpload(formPayload);\n      }\n      navigate('/admin/uploads');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error saving file:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Error saving file');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Get icon based on file type\n   * ðŸ‡«ðŸ‡· Obtenir l'icÃ´ne en fonction du type de fichier\n   */\n  const getFileIcon = type => {\n    switch (type) {\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(FaImage, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 28\n        }, this);\n      case 'video':\n        return /*#__PURE__*/_jsxDEV(FaVideo, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 28\n        }, this);\n      case 'audio':\n        return /*#__PURE__*/_jsxDEV(FaMusic, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 28\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(FaFile, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-primary me-3\",\n            onClick: () => navigate('/admin/uploads'),\n            children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this), \" Retour\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"h4 mb-0\",\n            children: isEditMode ? \"Modifier le fichier\" : \"Ajouter un fichier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"Chargement...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          encType: \"multipart/form-data\",\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: \"Fichier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card bg-light\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-body\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex flex-column align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-primary mb-3\",\n                        children: formData.type ? getFileIcon(formData.type) : /*#__PURE__*/_jsxDEV(FaUpload, {\n                          size: 40\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 235,\n                          columnNumber: 75\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 234,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-center mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          className: \"mb-1\",\n                          children: formData.file ? formData.file.name : isEditMode ? formData.filename : 'SÃ©lectionnez un fichier'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-muted small mb-0\",\n                          children: \"PNG, JPG, GIF jusqu'\\xE0 5MB\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 241,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex gap-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"btn btn-primary mb-0\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            className: \"d-none\",\n                            onChange: handleFileChange,\n                            accept: \"image/*,video/*,audio/*,.pdf\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 247,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(FaUpload, {\n                            className: \"me-2\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 253,\n                            columnNumber: 31\n                          }, this), isEditMode ? 'Changer le fichier' : 'SÃ©lectionner un fichier']\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 246,\n                          columnNumber: 29\n                        }, this), formData.file && /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          className: \"btn btn-outline-danger\",\n                          onClick: () => {\n                            setFormData(prev => ({\n                              ...prev,\n                              file: null\n                            }));\n                            setPreview(null);\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(FaTrash, {\n                            className: \"me-2\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 265,\n                            columnNumber: 33\n                          }, this), \"Retirer\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 257,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 245,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 233,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row g-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"filename\",\n                    className: \"form-label\",\n                    children: \"Nom du fichier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    id: \"filename\",\n                    name: \"filename\",\n                    value: formData.filename,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      filename: e.target.value\n                    })),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"type\",\n                    className: \"form-label\",\n                    children: \"Type de fichier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select\",\n                    id: \"type\",\n                    name: \"type\",\n                    value: formData.type,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      type: e.target.value\n                    })),\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"S\\xE9lectionner un type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 300,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"image\",\n                      children: \"Image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"video\",\n                      children: \"Vid\\xE9o\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 302,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"audio\",\n                      children: \"Audio\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 303,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"document\",\n                      children: \"Document\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"user_id\",\n                    className: \"form-label\",\n                    children: \"Utilisateur\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select\",\n                    id: \"user_id\",\n                    name: \"user_id\",\n                    value: formData.user_id,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      user_id: e.target.value\n                    })),\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"S\\xE9lectionner un utilisateur\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 25\n                    }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: user.id,\n                      children: user.username || user.email\n                    }, user.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 320,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 310,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: preview && formData.type === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"card-title mb-3\",\n                    children: \"Aper\\xE7u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: preview,\n                    alt: \"Preview\",\n                    className: \"img-fluid rounded\",\n                    onError: e => {\n                      console.error('Erreur de chargement de l\\'image:', preview);\n                      e.target.src = 'https://placehold.co/400x300?text=Erreur+de+chargement';\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 25\n                  }, this), isEditMode && !formData.file && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted small mt-2\",\n                    children: \"Image actuelle - s\\xE9lectionnez un nouveau fichier pour la remplacer\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 345,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-end mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: loading || !isEditMode && !formData.file,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-border spinner-border-sm me-2\",\n                  role: \"status\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 23\n                }, this), \"Enregistrement...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FaSave, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 23\n                }, this), \" Enregistrer\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadFormPage, \"TAacnapj/EYwLNyzgRckt5wfvYs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = UploadFormPage;\nexport default UploadFormPage;\nvar _c;\n$RefreshReg$(_c, \"UploadFormPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","FaArrowLeft","FaSave","FaUpload","FaImage","FaFile","FaVideo","FaMusic","FaTrash","getUpload","createUpload","updateUpload","getUsers","jsxDEV","_jsxDEV","Fragment","_Fragment","UploadFormPage","_s","id","navigate","isEditMode","formData","setFormData","filename","type","user_id","file","preview","setPreview","loading","setLoading","error","setError","users","setUsers","fetchUpload","response","uploadData","data","console","log","toString","url","err","fetchUsers","handleFileChange","e","target","files","allowedTypes","maxSize","size","prev","name","startsWith","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","formPayload","FormData","append","pair","entries","_err$response","_err$response$data","message","getFileIcon","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","role","onSubmit","encType","onChange","accept","htmlFor","value","required","map","user","username","email","src","alt","onError","disabled","_c","$RefreshReg$"],"sources":["/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/admin/uploads/UploadFormPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  FaArrowLeft, \n  FaSave, \n  FaUpload, \n  FaImage, \n  FaFile, \n  FaVideo, \n  FaMusic,\n  FaTrash\n} from 'react-icons/fa';\nimport { getUpload, createUpload, updateUpload } from '../../../services/uploads';\nimport { getUsers } from '../../../services/users';\n\nconst UploadFormPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n\n  // Form state\n  const [formData, setFormData] = useState({\n    filename: '',\n    type: '',\n    user_id: '',\n    file: null\n  });\n\n  // UI states\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [users, setUsers] = useState([]);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Load upload data if in edit mode\n   * ðŸ‡«ðŸ‡· Charger les donnÃ©es du fichier si en mode Ã©dition\n   */\n  useEffect(() => {\n    const fetchUpload = async () => {\n      if (isEditMode) {\n        try {\n          setLoading(true);\n          const response = await getUpload(id);\n          const uploadData = response.data;\n          \n          console.log('DonnÃ©es du fichier chargÃ©es:', uploadData);\n          \n          setFormData({\n            filename: uploadData.filename || '',\n            type: uploadData.type || '',\n            user_id: uploadData.user_id ? uploadData.user_id.toString() : '',\n            file: null\n          });\n\n          // Set preview for images\n          if (uploadData.type === 'image' && uploadData.url) {\n            setPreview(uploadData.url);\n          }\n          \n          setLoading(false);\n        } catch (err) {\n          console.error('Error loading upload:', err);\n          setError('Error loading file data');\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchUpload();\n  }, [id, isEditMode]);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Load users\n   * ðŸ‡«ðŸ‡· Charger les utilisateurs\n   */\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const response = await getUsers();\n        setUsers(response.data);\n      } catch (err) {\n        console.error(\"Error fetching users:\", err);\n      }\n    };\n  \n    fetchUsers();\n  }, []);\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Handle file selection\n   * ðŸ‡«ðŸ‡· GÃ©rer la sÃ©lection de fichier\n   */\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = {\n      'image/jpeg': 'image',\n      'image/png': 'image',\n      'image/gif': 'image',\n      'video/mp4': 'video',\n      'audio/mpeg': 'audio',\n      'application/pdf': 'document'\n    };\n\n    if (!allowedTypes[file.type]) {\n      setError('Type de fichier non supportÃ©');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (file.size > maxSize) {\n      setError('Le fichier est trop volumineux (max 5MB)');\n      return;\n    }\n\n    setFormData(prev => ({\n      ...prev,\n      file: file,\n      filename: file.name,\n      type: allowedTypes[file.type]\n    }));\n\n    // Create preview for images\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n\n    // Clear any previous errors\n    setError(null);\n  };\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Handle form submission\n   * ðŸ‡«ðŸ‡· GÃ©rer la soumission du formulaire\n   */\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const formPayload = new FormData();\n      formPayload.append('filename', formData.filename);\n      formPayload.append('type', formData.type);\n      formPayload.append('user_id', formData.user_id);\n      \n      if (formData.file) {\n        formPayload.append('file', formData.file);\n      }\n\n      // Debugging - log FormData content\n      for (let pair of formPayload.entries()) {\n        console.log(`${pair[0]}: ${pair[1]}`);\n      }\n\n      if (isEditMode) {\n        await updateUpload(id, formPayload);\n      } else {\n        await createUpload(formPayload);\n      }\n\n      navigate('/admin/uploads');\n    } catch (err) {\n      console.error('Error saving file:', err);\n      setError(err.response?.data?.message || 'Error saving file');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /**\n   * ðŸ‡¬ðŸ‡§ Get icon based on file type\n   * ðŸ‡«ðŸ‡· Obtenir l'icÃ´ne en fonction du type de fichier\n   */\n  const getFileIcon = (type) => {\n    switch (type) {\n      case 'image': return <FaImage size={40} />;\n      case 'video': return <FaVideo size={40} />;\n      case 'audio': return <FaMusic size={40} />;\n      default: return <FaFile size={40} />;\n    }\n  };\n\n  return (\n    <div className=\"container py-4\">\n      <div className=\"card shadow\">\n        <div className=\"card-header bg-white\">\n          <div className=\"d-flex align-items-center\">\n            <button \n              className=\"btn btn-outline-primary me-3\"\n              onClick={() => navigate('/admin/uploads')}\n            >\n              <FaArrowLeft className=\"me-2\" /> Retour\n            </button>\n            <h1 className=\"h4 mb-0\">\n              {isEditMode ? \"Modifier le fichier\" : \"Ajouter un fichier\"}\n            </h1>\n          </div>\n        </div>\n\n        <div className=\"card-body\">\n          {loading ? (\n            <div className=\"text-center py-5\">\n              <div className=\"spinner-border text-primary\" role=\"status\">\n                <span className=\"visually-hidden\">Chargement...</span>\n              </div>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"row\">\n                <div className=\"col-md-8\">\n                  {/* File Upload */}\n                  <div className=\"mb-4\">\n                    <label className=\"form-label\">Fichier</label>\n                    <div className=\"card bg-light\">\n                      <div className=\"card-body\">\n                        <div className=\"d-flex flex-column align-items-center\">\n                          <div className=\"text-primary mb-3\">\n                            {formData.type ? getFileIcon(formData.type) : <FaUpload size={40} />}\n                          </div>\n                          <div className=\"text-center mb-3\">\n                            <h5 className=\"mb-1\">\n                              {formData.file ? formData.file.name : (isEditMode ? formData.filename : 'SÃ©lectionnez un fichier')}\n                            </h5>\n                            <p className=\"text-muted small mb-0\">\n                              PNG, JPG, GIF jusqu'Ã  5MB\n                            </p>\n                          </div>\n                          <div className=\"d-flex gap-2\">\n                            <label className=\"btn btn-primary mb-0\">\n                              <input\n                                type=\"file\"\n                                className=\"d-none\"\n                                onChange={handleFileChange}\n                                accept=\"image/*,video/*,audio/*,.pdf\"\n                              />\n                              <FaUpload className=\"me-2\" />\n                              {isEditMode ? 'Changer le fichier' : 'SÃ©lectionner un fichier'}\n                            </label>\n                            {formData.file && (\n                              <button\n                                type=\"button\"\n                                className=\"btn btn-outline-danger\"\n                                onClick={() => {\n                                  setFormData(prev => ({...prev, file: null}));\n                                  setPreview(null);\n                                }}\n                              >\n                                <FaTrash className=\"me-2\" />\n                                Retirer\n                              </button>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* File Details */}\n                  <div className=\"row g-3\">\n                    <div className=\"col-md-6\">\n                      <label htmlFor=\"filename\" className=\"form-label\">Nom du fichier</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"filename\"\n                        name=\"filename\"\n                        value={formData.filename}\n                        onChange={(e) => setFormData(prev => ({ ...prev, filename: e.target.value }))}\n                        required\n                      />\n                    </div>\n\n                    <div className=\"col-md-6\">\n                      <label htmlFor=\"type\" className=\"form-label\">Type de fichier</label>\n                      <select\n                        className=\"form-select\"\n                        id=\"type\"\n                        name=\"type\"\n                        value={formData.type}\n                        onChange={(e) => setFormData(prev => ({ ...prev, type: e.target.value }))}\n                        required\n                      >\n                        <option value=\"\">SÃ©lectionner un type</option>\n                        <option value=\"image\">Image</option>\n                        <option value=\"video\">VidÃ©o</option>\n                        <option value=\"audio\">Audio</option>\n                        <option value=\"document\">Document</option>\n                      </select>\n                    </div>\n\n                    <div className=\"col-12\">\n                      <label htmlFor=\"user_id\" className=\"form-label\">Utilisateur</label>\n                      <select\n                        className=\"form-select\"\n                        id=\"user_id\"\n                        name=\"user_id\"\n                        value={formData.user_id}\n                        onChange={(e) => setFormData(prev => ({ ...prev, user_id: e.target.value }))}\n                        required\n                      >\n                        <option value=\"\">SÃ©lectionner un utilisateur</option>\n                        {users.map(user => (\n                          <option key={user.id} value={user.id}>\n                            {user.username || user.email}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"col-md-4\">\n                  {/* Preview */}\n                  {preview && formData.type === 'image' && (\n                    <div className=\"card\">\n                      <div className=\"card-body\">\n                        <h5 className=\"card-title mb-3\">AperÃ§u</h5>\n                        <img \n                          src={preview} \n                          alt=\"Preview\" \n                          className=\"img-fluid rounded\"\n                          onError={(e) => {\n                            console.error('Erreur de chargement de l\\'image:', preview);\n                            e.target.src = 'https://placehold.co/400x300?text=Erreur+de+chargement';\n                          }}\n                        />\n                        {isEditMode && !formData.file && (\n                          <p className=\"text-muted small mt-2\">\n                            Image actuelle - sÃ©lectionnez un nouveau fichier pour la remplacer\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"d-flex justify-content-end mt-4\">\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  disabled={loading || (!isEditMode && !formData.file)}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                      Enregistrement...\n                    </>\n                  ) : (\n                    <>\n                      <FaSave className=\"me-2\" /> Enregistrer\n                    </>\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadFormPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}