{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/routes/PrivateRoute.jsx\",\n  _s = $RefreshSig$();\n/**\n * üá¨üáß Private route component with direct login redirection\n * üá´üá∑ Composant de route priv√©e avec redirection directe vers la page de connexion\n */\nimport { Outlet, Navigate, useLocation } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useAuth from \"../hooks/useAuth\";\n\n/**\n * üá¨üáß PrivateRoute - Controls access to protected routes\n * Redirects unauthenticated users directly to the login page\n * \n * üá´üá∑ PrivateRoute - Contr√¥le l'acc√®s aux routes prot√©g√©es\n * Redirige les utilisateurs non authentifi√©s directement vers la page de connexion\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = () => {\n  _s();\n  const auth = useAuth();\n  const location = useLocation();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    // M√©thode prioritaire: utiliser le hook useAuth\n    const checkAuthViaHook = () => {\n      console.log(\"Auth from hook:\", auth);\n      if (auth && auth.token) {\n        setIsAuthenticated(true);\n        setIsLoading(false);\n        return;\n      }\n\n      // Si le hook ne fournit pas le token, v√©rifier directement localStorage\n      const checkAuthViaLocalStorage = () => {\n        try {\n          // Essayer plusieurs cl√©s possibles pour le token\n          const possibleKeys = [\"auth_token\",\n          // Cl√© par d√©faut\n          \"token\",\n          // Autre cl√© commune\n          \"jwt_token\",\n          // Autre possibilit√©\n          \"access_token\" // Autre possibilit√©\n          ];\n\n          // V√©rifier toutes les cl√©s possibles\n          let foundToken = null;\n          for (const key of possibleKeys) {\n            const token = localStorage.getItem(key);\n            if (token) {\n              console.log(`Token found using key: ${key}`);\n              foundToken = token;\n              break;\n            }\n          }\n          setIsAuthenticated(Boolean(foundToken));\n        } catch (error) {\n          console.error(\"Error checking auth:\", error);\n          setIsAuthenticated(false);\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      checkAuthViaLocalStorage();\n    };\n    checkAuthViaHook();\n  }, [auth]);\n\n  // Log de d√©bogage\n  console.log(\"Current path:\", location.pathname);\n  console.log(\"Authentication status:\", isAuthenticated);\n\n  // Afficher un indicateur de chargement pendant la v√©rification\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-5\",\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Si l'utilisateur n'est pas authentifi√©, rediriger directement vers la page de connexion\n  if (!isAuthenticated) {\n    console.log(\"Access denied: Redirecting to /login\");\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Si l'utilisateur est authentifi√©, afficher le contenu prot√©g√©\n  console.log(\"Access granted: Displaying protected content\");\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 10\n  }, this);\n};\n_s(PrivateRoute, \"blCgm1M5TxrvNKZfxGzPnZRWh4I=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = PrivateRoute;\nexport default PrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["Outlet","Navigate","useLocation","useState","useEffect","useAuth","jsxDEV","_jsxDEV","PrivateRoute","_s","auth","location","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","checkAuthViaHook","console","log","token","checkAuthViaLocalStorage","possibleKeys","foundToken","key","localStorage","getItem","Boolean","error","pathname","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","_c","$RefreshReg$"],"sources":["/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/routes/PrivateRoute.jsx"],"sourcesContent":["/**\n * üá¨üáß Private route component with direct login redirection\n * üá´üá∑ Composant de route priv√©e avec redirection directe vers la page de connexion\n */\nimport { Outlet, Navigate, useLocation } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport useAuth from \"../hooks/useAuth\";\n\n/**\n * üá¨üáß PrivateRoute - Controls access to protected routes\n * Redirects unauthenticated users directly to the login page\n * \n * üá´üá∑ PrivateRoute - Contr√¥le l'acc√®s aux routes prot√©g√©es\n * Redirige les utilisateurs non authentifi√©s directement vers la page de connexion\n */\nconst PrivateRoute = () => {\n  const auth = useAuth();\n  const location = useLocation();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  \n  useEffect(() => {\n    // M√©thode prioritaire: utiliser le hook useAuth\n    const checkAuthViaHook = () => {\n      console.log(\"Auth from hook:\", auth);\n      \n      if (auth && auth.token) {\n        setIsAuthenticated(true);\n        setIsLoading(false);\n        return;\n      }\n      \n      // Si le hook ne fournit pas le token, v√©rifier directement localStorage\n      const checkAuthViaLocalStorage = () => {\n        try {\n          // Essayer plusieurs cl√©s possibles pour le token\n          const possibleKeys = [\n            \"auth_token\", // Cl√© par d√©faut\n            \"token\",      // Autre cl√© commune\n            \"jwt_token\",  // Autre possibilit√©\n            \"access_token\" // Autre possibilit√©\n          ];\n          \n          // V√©rifier toutes les cl√©s possibles\n          let foundToken = null;\n          for (const key of possibleKeys) {\n            const token = localStorage.getItem(key);\n            if (token) {\n              console.log(`Token found using key: ${key}`);\n              foundToken = token;\n              break;\n            }\n          }\n          \n          setIsAuthenticated(Boolean(foundToken));\n        } catch (error) {\n          console.error(\"Error checking auth:\", error);\n          setIsAuthenticated(false);\n        } finally {\n          setIsLoading(false);\n        }\n      };\n      \n      checkAuthViaLocalStorage();\n    };\n    \n    checkAuthViaHook();\n  }, [auth]);\n  \n  // Log de d√©bogage\n  console.log(\"Current path:\", location.pathname);\n  console.log(\"Authentication status:\", isAuthenticated);\n  \n  // Afficher un indicateur de chargement pendant la v√©rification\n  if (isLoading) {\n    return <div className=\"text-center p-5\">Chargement...</div>;\n  }\n\n  // Si l'utilisateur n'est pas authentifi√©, rediriger directement vers la page de connexion\n  if (!isAuthenticated) {\n    console.log(\"Access denied: Redirecting to /login\");\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // Si l'utilisateur est authentifi√©, afficher le contenu prot√©g√©\n  console.log(\"Access granted: Displaying protected content\");\n  return <Outlet />;\n};\n\nexport default PrivateRoute;"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,SAASA,MAAM,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,OAAO,MAAM,kBAAkB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AANA,SAAAC,MAAA,IAAAC,OAAA;AAOA,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,IAAI,GAAGL,OAAO,CAAC,CAAC;EACtB,MAAMM,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACU,eAAe,EAAEC,kBAAkB,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACW,SAAS,EAAEC,YAAY,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACd;IACA,MAAMY,gBAAgB,GAAGA,CAAA,KAAM;MAC7BC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAER,IAAI,CAAC;MAEpC,IAAIA,IAAI,IAAIA,IAAI,CAACS,KAAK,EAAE;QACtBN,kBAAkB,CAAC,IAAI,CAAC;QACxBE,YAAY,CAAC,KAAK,CAAC;QACnB;MACF;;MAEA;MACA,MAAMK,wBAAwB,GAAGA,CAAA,KAAM;QACrC,IAAI;UACF;UACA,MAAMC,YAAY,GAAG,CACnB,YAAY;UAAE;UACd,OAAO;UAAO;UACd,WAAW;UAAG;UACd,cAAc,CAAC;UAAA,CAChB;;UAED;UACA,IAAIC,UAAU,GAAG,IAAI;UACrB,KAAK,MAAMC,GAAG,IAAIF,YAAY,EAAE;YAC9B,MAAMF,KAAK,GAAGK,YAAY,CAACC,OAAO,CAACF,GAAG,CAAC;YACvC,IAAIJ,KAAK,EAAE;cACTF,OAAO,CAACC,GAAG,CAAC,0BAA0BK,GAAG,EAAE,CAAC;cAC5CD,UAAU,GAAGH,KAAK;cAClB;YACF;UACF;UAEAN,kBAAkB,CAACa,OAAO,CAACJ,UAAU,CAAC,CAAC;QACzC,CAAC,CAAC,OAAOK,KAAK,EAAE;UACdV,OAAO,CAACU,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC5Cd,kBAAkB,CAAC,KAAK,CAAC;QAC3B,CAAC,SAAS;UACRE,YAAY,CAAC,KAAK,CAAC;QACrB;MACF,CAAC;MAEDK,wBAAwB,CAAC,CAAC;IAC5B,CAAC;IAEDJ,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACN,IAAI,CAAC,CAAC;;EAEV;EACAO,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEP,QAAQ,CAACiB,QAAQ,CAAC;EAC/CX,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEN,eAAe,CAAC;;EAEtD;EACA,IAAIE,SAAS,EAAE;IACb,oBAAOP,OAAA;MAAKsB,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAAC;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC7D;;EAEA;EACA,IAAI,CAACtB,eAAe,EAAE;IACpBK,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACnD,oBAAOX,OAAA,CAACN,QAAQ;MAACkC,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAE1B;MAAS,CAAE;MAAC2B,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACAjB,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;EAC3D,oBAAOX,OAAA,CAACP,MAAM;IAAA+B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnB,CAAC;AAACzB,EAAA,CAxEID,YAAY;EAAA,QACHH,OAAO,EACHH,WAAW;AAAA;AAAAqC,EAAA,GAFxB/B,YAAY;AA0ElB,eAAeA,YAAY;AAAC,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}