{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/user/mylists/UserMyListAddItemPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { FaArrowLeft, FaSave, FaListAlt, FaInfoCircle, FaSwimmer, FaDumbbell, FaCalendarCheck, FaSearch, FaPlus, FaFilter, FaBook, FaPencilAlt, FaLayerGroup, FaLightbulb, FaTools, FaExclamationTriangle } from 'react-icons/fa';\nimport Footer from '../../../components/template/Footer';\nimport { getMylist } from '../../../services/mylists';\nimport { addItemToMylist } from '../../../services/mylistItems';\nimport useAuth from '../../../hooks/useAuth';\nimport DataDiagnosticComponent from '../../../components/ui/DataDiagnosticComponent';\nimport AuthTestComponent from '../../../components/ui/AuthTestComponent';\nimport { getExercises } from '../../../services/exercises';\nimport { getWorkouts } from '../../../services/workouts';\nimport { getPlans } from '../../../services/plans';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserMyListAddItemPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n\n  // States\n  const [mylist, setMylist] = useState(null);\n  const [itemType, setItemType] = useState('exercise');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingList, setLoadingList] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  // Available items to add\n  const [availableItems, setAvailableItems] = useState([]);\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [existingItems, setExistingItems] = useState([]);\n\n  // Load list and initial data\n  useEffect(() => {\n    const fetchListData = async () => {\n      try {\n        setLoadingList(true);\n\n        // Fetch list details\n        const listResponse = await getMylist(id);\n        setMylist(listResponse.data);\n\n        // Fetch list items to know which ones are already added\n        const listItemsResponse = await axios.get(`/api/mylist/${id}/items`);\n        const itemsInList = listItemsResponse.data;\n\n        // Extract IDs and types from existing items\n        const existingItemsData = itemsInList.map(item => {\n          // Handle both formats: 'exercise' or 'App\\\\Models\\\\Exercise'\n          const typeShort = item.item_type.includes('\\\\') ? item.item_type.split('\\\\').pop().toLowerCase() : item.item_type;\n          return {\n            id: item.item_id,\n            type: typeShort\n          };\n        });\n        setExistingItems(existingItemsData);\n        setError(null);\n      } catch (err) {\n        console.error('Error loading list data:', err);\n        setError('Erreur lors du chargement des données de la liste. Veuillez réessayer.');\n      } finally {\n        setLoadingList(false);\n\n        // Initial fetch of items based on the default type\n        fetchItemsByType('exercise');\n      }\n    };\n    fetchListData();\n  }, [id]);\n\n  // Filter items when search term changes\n  useEffect(() => {\n    if (searchTerm.trim() === '') {\n      setFilteredItems(availableItems);\n    } else {\n      const filtered = availableItems.filter(item => {\n        var _item$title;\n        return ((_item$title = item.title) === null || _item$title === void 0 ? void 0 : _item$title.toLowerCase().includes(searchTerm.toLowerCase())) || item.description && item.description.toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setFilteredItems(filtered);\n    }\n  }, [searchTerm, availableItems]);\n\n  // Log pour déboguer\n  const debugLogItemData = (data, type) => {\n    console.log(`Données ${type} récupérées:`, data);\n    if (data.length === 0) {\n      console.log(`Aucun ${type} trouvé dans la réponse.`);\n    } else {\n      console.log(`Premier ${type}:`, data[0]);\n      console.log(`Structure du premier ${type}:`, Object.keys(data[0]));\n    }\n  };\n\n  // Remplacer la fonction fetchItemsByType dans UserMyListAddItemPage.jsx\n  // Fonction améliorée pour récupérer les éléments par type\n\n  const fetchItemsByType = async type => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Déterminer l'endpoint API selon le type\n      let endpoint = '';\n      let serviceFunction;\n      switch (type) {\n        case 'exercise':\n          endpoint = '/api/exercises';\n          serviceFunction = getExercises; // assurez-vous d'importer cette fonction\n          break;\n        case 'workout':\n          endpoint = '/api/workouts';\n          serviceFunction = getWorkouts; // assurez-vous d'importer cette fonction\n          break;\n        case 'plan':\n          endpoint = '/api/plans';\n          serviceFunction = getPlans; // assurez-vous d'importer cette fonction\n          break;\n        default:\n          setError(`Type d'élément non reconnu`);\n          setLoading(false);\n          return;\n      }\n      console.log(`Récupération des ${type}s depuis ${endpoint}`);\n      try {\n        // Utiliser le service approprié pour la récupération\n        const response = await serviceFunction();\n        console.log(`Réponse complète pour ${type}:`, response);\n\n        // Vérifier si la réponse contient des données\n        if (response && response.data) {\n          let items = response.data;\n\n          // Vérifier si les données sont dans un format attendu\n          if (!Array.isArray(items)) {\n            // Si ce n'est pas un tableau, essayer de trouver les données dans une propriété data\n            if (response.data.data && Array.isArray(response.data.data)) {\n              items = response.data.data;\n            } else {\n              console.error(`Format de données inattendu pour ${type}:`, response.data);\n              throw new Error(`Format de données inattendu pour ${type}`);\n            }\n          }\n          console.log(`${items.length} ${type}s récupérés`);\n\n          // Filtrer les éléments déjà présents dans la liste\n          const filteredItems = items.filter(item => {\n            return !existingItems.some(existingItem => existingItem.id === item.id && existingItem.type === type);\n          });\n          console.log(`${filteredItems.length} ${type}s disponibles après filtrage`);\n\n          // Vérifier si certains éléments ont été filtrés\n          if (items.length > 0 && filteredItems.length === 0) {\n            setError(`Tous les ${type === 'exercise' ? 'exercices' : type === 'workout' ? 'séances' : 'plans'} disponibles sont déjà dans cette liste`);\n          }\n          setAvailableItems(filteredItems);\n          setFilteredItems(filteredItems);\n        } else {\n          console.error(`Réponse sans données pour ${type}`);\n          throw new Error(`Aucune donnée reçue pour ${type}`);\n        }\n      } catch (apiError) {\n        console.error(`Erreur lors de la récupération des ${type}s:`, apiError);\n\n        // Message d'erreur personnalisé\n        setError(`Impossible de charger les ${type === 'exercise' ? 'exercices' : type === 'workout' ? 'séances' : 'plans'}. ${apiError.message}`);\n\n        // Réinitialiser les listes\n        setAvailableItems([]);\n        setFilteredItems([]);\n      }\n    } catch (generalError) {\n      console.error(`Erreur générale:`, generalError);\n      setError(`Une erreur inattendue s'est produite. Veuillez réessayer.`);\n      setAvailableItems([]);\n      setFilteredItems([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle item type change\n  const handleItemTypeChange = type => {\n    setItemType(type);\n    fetchItemsByType(type);\n    setSearchTerm('');\n  };\n\n  // Toggle item selection\n  const toggleItemSelection = item => {\n    if (selectedItems.some(selectedItem => selectedItem.id === item.id)) {\n      setSelectedItems(selectedItems.filter(selectedItem => selectedItem.id !== item.id));\n    } else {\n      setSelectedItems([...selectedItems, item]);\n    }\n  };\n\n  // Add selected items to list\n  const handleAddItems = async () => {\n    if (selectedItems.length === 0) {\n      setError('Veuillez sélectionner au moins un élément à ajouter');\n      return;\n    }\n    setSaving(true);\n    setError(null);\n    let successCount = 0;\n    let failCount = 0;\n    try {\n      // Add each selected item one by one\n      for (const item of selectedItems) {\n        try {\n          console.log(`Ajout de l'élément ${item.id} de type ${itemType} à la liste ${id}`);\n          const response = await addItemToMylist(id, {\n            item_id: item.id,\n            item_type: itemType // Using simple type format which our corrected controller can handle\n          });\n          console.log('Réponse de l\\'ajout:', response);\n          successCount++;\n        } catch (err) {\n          console.error('Error adding item:', err);\n          if (err.response) {\n            console.error('Détails de l\\'erreur:', err.response.data);\n          }\n          failCount++;\n        }\n      }\n      if (successCount > 0) {\n        let message = `${successCount} ${successCount === 1 ? 'élément ajouté' : 'éléments ajoutés'} avec succès`;\n        if (failCount > 0) {\n          message += ` (${failCount} ${failCount === 1 ? 'échec' : 'échecs'})`;\n        }\n        setSuccess(message);\n\n        // Update existing items for filtering purposes\n        const newExistingItems = [...existingItems, ...selectedItems.map(item => ({\n          id: item.id,\n          type: itemType\n        }))];\n        setExistingItems(newExistingItems);\n\n        // Update available items list\n        setAvailableItems(availableItems.filter(item => !selectedItems.some(selected => selected.id === item.id)));\n        setFilteredItems(filteredItems.filter(item => !selectedItems.some(selected => selected.id === item.id)));\n\n        // Clear selection\n        setSelectedItems([]);\n\n        // Auto-fetch new items of the same type after a short delay\n        setTimeout(() => {\n          fetchItemsByType(itemType);\n        }, 1000);\n      } else if (failCount > 0) {\n        setError(`Échec de l'ajout des éléments. Veuillez réessayer.`);\n      }\n    } catch (err) {\n      console.error('Error in batch add operation:', err);\n      setError('Une erreur est survenue. Veuillez réessayer.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Format item details based on type\n  const formatItemDetails = item => {\n    switch (itemType) {\n      case 'exercise':\n        return `${item.exercise_level || 'Tous niveaux'} · ${item.exercise_category || 'Non catégorisé'}`;\n      case 'workout':\n        return `${item.workout_category || 'Non catégorisé'}`;\n      case 'plan':\n        return `${item.plan_category || 'Non catégorisé'}`;\n      default:\n        return '';\n    }\n  };\n\n  // Get icon based on type\n  const getItemTypeIcon = () => {\n    switch (itemType) {\n      case 'exercise':\n        return /*#__PURE__*/_jsxDEV(FaDumbbell, {\n          className: \"text-primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 16\n        }, this);\n      case 'workout':\n        return /*#__PURE__*/_jsxDEV(FaSwimmer, {\n          className: \"text-info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 16\n        }, this);\n      case 'plan':\n        return /*#__PURE__*/_jsxDEV(FaCalendarCheck, {\n          className: \"text-success\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(FaListAlt, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // Debug message for empty items\n  const renderEmptyMessage = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-light rounded-circle p-4 d-inline-block mb-3\",\n        children: getItemTypeIcon()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: searchTerm ? `Aucun ${itemType === 'exercise' ? 'exercice' : itemType === 'workout' ? 'séance' : 'plan'} ne correspond à votre recherche.` : `Aucun ${itemType === 'exercise' ? 'exercice' : itemType === 'workout' ? 'séance' : 'plan'} disponible à ajouter.`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), !searchTerm && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-info\",\n          children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), \"Si vous \\xEAtes administrateur, v\\xE9rifiez que des \", itemType === 'exercise' ? 'exercices' : itemType === 'workout' ? 'séances' : 'plans', \" ont \\xE9t\\xE9 cr\\xE9\\xE9s dans le syst\\xE8me.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container py-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/user/mylists/${id}`,\n            className: \"btn btn-outline-secondary me-3\",\n            children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this), \" Retour \\xE0 la liste\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"h3 mb-0\",\n              children: \"Ajouter des \\xE9l\\xE9ments \\xE0 la liste\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), mylist && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-muted mb-0\",\n              children: mylist.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 26\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleAddItems,\n          disabled: saving || selectedItems.length === 0,\n          children: saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"spinner-border spinner-border-sm me-2\",\n              role: \"status\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 19\n            }, this), \"Ajout en cours...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(FaPlus, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 19\n            }, this), \"Ajouter \", selectedItems.length, \" \", selectedItems.length === 1 ? 'élément' : 'éléments', \" \\xE0 la liste\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(FaExclamationTriangle, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), \" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 11\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-success\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(FaInfoCircle, {\n          className: \"me-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this), \" \", success]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-sm mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header bg-light py-3\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h5 mb-0\",\n            children: \"Type d'\\xE9l\\xE9ment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4 mb-3 mb-md-0\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `btn btn-lg w-100 h-100 ${itemType === 'exercise' ? 'btn-primary' : 'btn-outline-primary'}`,\n                onClick: () => handleItemTypeChange('exercise'),\n                children: [/*#__PURE__*/_jsxDEV(FaDumbbell, {\n                  className: \"mb-2 fs-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Exercices\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4 mb-3 mb-md-0\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `btn btn-lg w-100 h-100 ${itemType === 'workout' ? 'btn-primary' : 'btn-outline-primary'}`,\n                onClick: () => handleItemTypeChange('workout'),\n                children: [/*#__PURE__*/_jsxDEV(FaSwimmer, {\n                  className: \"mb-2 fs-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"S\\xE9ances\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `btn btn-lg w-100 h-100 ${itemType === 'plan' ? 'btn-primary' : 'btn-outline-primary'}`,\n                onClick: () => handleItemTypeChange('plan'),\n                children: [/*#__PURE__*/_jsxDEV(FaCalendarCheck, {\n                  className: \"mb-2 fs-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Plans\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-sm mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row g-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-8\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"input-group-text bg-light border-light\",\n                  children: /*#__PURE__*/_jsxDEV(FaSearch, {\n                    className: \"text-muted\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 462,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: \"form-control border-light bg-light\",\n                  placeholder: `Rechercher des ${itemType === 'exercise' ? 'exercices' : itemType === 'workout' ? 'séances' : 'plans'}...`,\n                  value: searchTerm,\n                  onChange: e => setSearchTerm(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2 justify-content-md-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-secondary\",\n                  disabled: true,\n                  children: [/*#__PURE__*/_jsxDEV(FaFilter, {\n                    className: \"me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 477,\n                    columnNumber: 21\n                  }, this), \" Filtrer\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-outline-primary\",\n                  onClick: () => fetchItemsByType(itemType),\n                  disabled: loading,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-arrow-clockwise me-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 21\n                  }, this), \" Actualiser\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header bg-light d-flex justify-content-between align-items-center py-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"h5 mb-0\",\n            children: [getItemTypeIcon(), \" \", ' ', itemType === 'exercise' ? 'Exercices' : itemType === 'workout' ? 'Séances' : 'Plans', \" disponibles\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-primary rounded-pill\",\n            children: [filteredItems.length, \" \", filteredItems.length === 1 ? 'élément' : 'éléments']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body p-0\",\n          children: loadingList || loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"spinner-border text-primary\",\n              role: \"status\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"visually-hidden\",\n                children: \"Chargement...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-3\",\n              children: \"Chargement des \\xE9l\\xE9ments...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this) : filteredItems.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"list-group list-group-flush\",\n            children: filteredItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3 ${selectedItems.some(selectedItem => selectedItem.id === item.id) ? 'active' : ''}`,\n              onClick: () => toggleItemSelection(item),\n              style: {\n                cursor: 'pointer'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `rounded-circle p-3 me-3 ${itemType === 'exercise' ? 'bg-primary-subtle' : itemType === 'workout' ? 'bg-info-subtle' : 'bg-success-subtle'}`,\n                  children: getItemTypeIcon()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"h6 mb-0 fw-bold\",\n                    children: item.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 533,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-0 small text-muted\",\n                    children: formatItemDetails(item)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-check\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-check-input\",\n                  type: \"checkbox\",\n                  checked: selectedItems.some(selectedItem => selectedItem.id === item.id),\n                  onChange: () => {} // onChange needed for controlled component, but logic is in the onClick of the parent div\n                  ,\n                  onClick: e => e.stopPropagation() // Prevent triggering parent onClick\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this) : renderEmptyMessage()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"details\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n            className: \"text-muted small\",\n            children: \"Informations de d\\xE9bogage (pour administrateurs)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 p-3 bg-light rounded small\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\xC9tat de la page:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 562,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"Type d'\\xE9l\\xE9ment s\\xE9lectionn\\xE9: \", itemType]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 564,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"\\xC9l\\xE9ments disponibles: \", availableItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 565,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"\\xC9l\\xE9ments filtr\\xE9s: \", filteredItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"\\xC9l\\xE9ments s\\xE9lectionn\\xE9s: \", selectedItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\"\\xC9l\\xE9ments existants dans la liste: \", existingItems.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"V\\xE9rifier si les \\xE9l\\xE9ments sont bien charg\\xE9s:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 571,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Les requ\\xEAtes API re\\xE7oivent-elles des r\\xE9ponses? V\\xE9rifiez dans les outils de d\\xE9veloppement (F12) \\u2192 Onglet R\\xE9seau.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Les endpoints corrects sont-ils appel\\xE9s? (/api/exercises, /api/workouts, /api/plans)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"La structure des donn\\xE9es est-elle celle attendue? Les objets doivent avoir un champ \\\"id\\\" et \\\"title\\\".\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Conseils si aucun \\xE9l\\xE9ment n'appara\\xEEt:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"V\\xE9rifiez que des \\xE9l\\xE9ments existent dans la base de donn\\xE9es.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"V\\xE9rifiez que l'utilisateur a les permissions pour voir ces \\xE9l\\xE9ments.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Essayez de d\\xE9sactiver temporairement le filtre des \\xE9l\\xE9ments d\\xE9j\\xE0 dans la liste.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(AuthTestComponent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(DataDiagnosticComponent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(UserMyListAddItemPage, \"v8I8C80CcOU7SN9gxwWNtnhPV0Q=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = UserMyListAddItemPage;\nexport default UserMyListAddItemPage;\nvar _c;\n$RefreshReg$(_c, \"UserMyListAddItemPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","FaArrowLeft","FaSave","FaListAlt","FaInfoCircle","FaSwimmer","FaDumbbell","FaCalendarCheck","FaSearch","FaPlus","FaFilter","FaBook","FaPencilAlt","FaLayerGroup","FaLightbulb","FaTools","FaExclamationTriangle","Footer","getMylist","addItemToMylist","useAuth","DataDiagnosticComponent","AuthTestComponent","getExercises","getWorkouts","getPlans","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","UserMyListAddItemPage","_s","id","navigate","user","mylist","setMylist","itemType","setItemType","selectedItems","setSelectedItems","loading","setLoading","loadingList","setLoadingList","saving","setSaving","error","setError","success","setSuccess","searchTerm","setSearchTerm","availableItems","setAvailableItems","filteredItems","setFilteredItems","existingItems","setExistingItems","fetchListData","listResponse","data","listItemsResponse","get","itemsInList","existingItemsData","map","item","typeShort","item_type","includes","split","pop","toLowerCase","item_id","type","err","console","fetchItemsByType","trim","filtered","filter","_item$title","title","description","debugLogItemData","log","length","Object","keys","endpoint","serviceFunction","response","items","Array","isArray","Error","some","existingItem","apiError","message","generalError","handleItemTypeChange","toggleItemSelection","selectedItem","handleAddItems","successCount","failCount","newExistingItems","selected","setTimeout","formatItemDetails","exercise_level","exercise_category","workout_category","plan_category","getItemTypeIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","renderEmptyMessage","children","to","onClick","disabled","role","placeholder","value","onChange","e","target","style","cursor","checked","stopPropagation","process","env","NODE_ENV","_c","$RefreshReg$"],"sources":["/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/user/mylists/UserMyListAddItemPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { \n  FaArrowLeft, \n  FaSave, \n  FaListAlt,\n  FaInfoCircle,\n  FaSwimmer,\n  FaDumbbell,\n  FaCalendarCheck,\n  FaSearch,\n  FaPlus,\n  FaFilter,\n  FaBook,\n  FaPencilAlt,\n  FaLayerGroup,\n  FaLightbulb,\n  FaTools,\n  FaExclamationTriangle\n} from 'react-icons/fa';\nimport Footer from '../../../components/template/Footer';\nimport { getMylist } from '../../../services/mylists';\nimport { addItemToMylist } from '../../../services/mylistItems';\nimport useAuth from '../../../hooks/useAuth';\nimport DataDiagnosticComponent from '../../../components/ui/DataDiagnosticComponent';\nimport AuthTestComponent from '../../../components/ui/AuthTestComponent';\nimport { getExercises } from '../../../services/exercises';\nimport { getWorkouts } from '../../../services/workouts';\nimport { getPlans } from '../../../services/plans';\n\n\nimport axios from 'axios';\n\nconst UserMyListAddItemPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { user } = useAuth();\n\n  // States\n  const [mylist, setMylist] = useState(null);\n  const [itemType, setItemType] = useState('exercise');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingList, setLoadingList] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // Available items to add\n  const [availableItems, setAvailableItems] = useState([]);\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [existingItems, setExistingItems] = useState([]);\n\n  // Load list and initial data\n  useEffect(() => {\n    const fetchListData = async () => {\n      try {\n        setLoadingList(true);\n        \n        // Fetch list details\n        const listResponse = await getMylist(id);\n        setMylist(listResponse.data);\n\n        // Fetch list items to know which ones are already added\n        const listItemsResponse = await axios.get(`/api/mylist/${id}/items`);\n        const itemsInList = listItemsResponse.data;\n        \n        // Extract IDs and types from existing items\n        const existingItemsData = itemsInList.map(item => {\n          // Handle both formats: 'exercise' or 'App\\\\Models\\\\Exercise'\n          const typeShort = item.item_type.includes('\\\\') \n            ? item.item_type.split('\\\\').pop().toLowerCase() \n            : item.item_type;\n          \n          return {\n            id: item.item_id,\n            type: typeShort\n          };\n        });\n        \n        setExistingItems(existingItemsData);\n        setError(null);\n      } catch (err) {\n        console.error('Error loading list data:', err);\n        setError('Erreur lors du chargement des données de la liste. Veuillez réessayer.');\n      } finally {\n        setLoadingList(false);\n        \n        // Initial fetch of items based on the default type\n        fetchItemsByType('exercise');\n      }\n    };\n\n    fetchListData();\n  }, [id]);\n\n  // Filter items when search term changes\n  useEffect(() => {\n    if (searchTerm.trim() === '') {\n      setFilteredItems(availableItems);\n    } else {\n      const filtered = availableItems.filter(item => \n        item.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        (item.description && item.description.toLowerCase().includes(searchTerm.toLowerCase()))\n      );\n      setFilteredItems(filtered);\n    }\n  }, [searchTerm, availableItems]);\n\n  // Log pour déboguer\n  const debugLogItemData = (data, type) => {\n    console.log(`Données ${type} récupérées:`, data);\n    if (data.length === 0) {\n      console.log(`Aucun ${type} trouvé dans la réponse.`);\n    } else {\n      console.log(`Premier ${type}:`, data[0]);\n      console.log(`Structure du premier ${type}:`, Object.keys(data[0]));\n    }\n  };\n\n  // Remplacer la fonction fetchItemsByType dans UserMyListAddItemPage.jsx\n// Fonction améliorée pour récupérer les éléments par type\n\nconst fetchItemsByType = async (type) => {\n  try {\n    setLoading(true);\n    setError(null);\n    \n    // Déterminer l'endpoint API selon le type\n    let endpoint = '';\n    let serviceFunction;\n    \n    switch (type) {\n      case 'exercise':\n        endpoint = '/api/exercises';\n        serviceFunction = getExercises; // assurez-vous d'importer cette fonction\n        break;\n      case 'workout':\n        endpoint = '/api/workouts';\n        serviceFunction = getWorkouts; // assurez-vous d'importer cette fonction\n        break;\n      case 'plan':\n        endpoint = '/api/plans';\n        serviceFunction = getPlans; // assurez-vous d'importer cette fonction\n        break;\n      default:\n        setError(`Type d'élément non reconnu`);\n        setLoading(false);\n        return;\n    }\n\n    console.log(`Récupération des ${type}s depuis ${endpoint}`);\n    \n    try {\n      // Utiliser le service approprié pour la récupération\n      const response = await serviceFunction();\n      console.log(`Réponse complète pour ${type}:`, response);\n      \n      // Vérifier si la réponse contient des données\n      if (response && response.data) {\n        let items = response.data;\n        \n        // Vérifier si les données sont dans un format attendu\n        if (!Array.isArray(items)) {\n          // Si ce n'est pas un tableau, essayer de trouver les données dans une propriété data\n          if (response.data.data && Array.isArray(response.data.data)) {\n            items = response.data.data;\n          } else {\n            console.error(`Format de données inattendu pour ${type}:`, response.data);\n            throw new Error(`Format de données inattendu pour ${type}`);\n          }\n        }\n        \n        console.log(`${items.length} ${type}s récupérés`);\n        \n        // Filtrer les éléments déjà présents dans la liste\n        const filteredItems = items.filter(item => {\n          return !existingItems.some(existingItem => \n            existingItem.id === item.id && \n            existingItem.type === type\n          );\n        });\n        \n        console.log(`${filteredItems.length} ${type}s disponibles après filtrage`);\n        \n        // Vérifier si certains éléments ont été filtrés\n        if (items.length > 0 && filteredItems.length === 0) {\n          setError(`Tous les ${type === 'exercise' ? 'exercices' : type === 'workout' ? 'séances' : 'plans'} disponibles sont déjà dans cette liste`);\n        }\n        \n        setAvailableItems(filteredItems);\n        setFilteredItems(filteredItems);\n      } else {\n        console.error(`Réponse sans données pour ${type}`);\n        throw new Error(`Aucune donnée reçue pour ${type}`);\n      }\n    } catch (apiError) {\n      console.error(`Erreur lors de la récupération des ${type}s:`, apiError);\n      \n      // Message d'erreur personnalisé\n      setError(`Impossible de charger les ${type === 'exercise' ? 'exercices' : type === 'workout' ? 'séances' : 'plans'}. ${apiError.message}`);\n      \n      // Réinitialiser les listes\n      setAvailableItems([]);\n      setFilteredItems([]);\n    }\n  } catch (generalError) {\n    console.error(`Erreur générale:`, generalError);\n    setError(`Une erreur inattendue s'est produite. Veuillez réessayer.`);\n    setAvailableItems([]);\n    setFilteredItems([]);\n  } finally {\n    setLoading(false);\n  }\n};\n\n  // Handle item type change\n  const handleItemTypeChange = (type) => {\n    setItemType(type);\n    fetchItemsByType(type);\n    setSearchTerm('');\n  };\n\n  // Toggle item selection\n  const toggleItemSelection = (item) => {\n    if (selectedItems.some(selectedItem => selectedItem.id === item.id)) {\n      setSelectedItems(selectedItems.filter(selectedItem => selectedItem.id !== item.id));\n    } else {\n      setSelectedItems([...selectedItems, item]);\n    }\n  };\n\n  // Add selected items to list\n  const handleAddItems = async () => {\n    if (selectedItems.length === 0) {\n      setError('Veuillez sélectionner au moins un élément à ajouter');\n      return;\n    }\n\n    setSaving(true);\n    setError(null);\n    let successCount = 0;\n    let failCount = 0;\n\n    try {\n      // Add each selected item one by one\n      for (const item of selectedItems) {\n        try {\n          console.log(`Ajout de l'élément ${item.id} de type ${itemType} à la liste ${id}`);\n          \n          const response = await addItemToMylist(id, {\n            item_id: item.id,\n            item_type: itemType // Using simple type format which our corrected controller can handle\n          });\n          \n          console.log('Réponse de l\\'ajout:', response);\n          successCount++;\n        } catch (err) {\n          console.error('Error adding item:', err);\n          if (err.response) {\n            console.error('Détails de l\\'erreur:', err.response.data);\n          }\n          failCount++;\n        }\n      }\n\n      if (successCount > 0) {\n        let message = `${successCount} ${successCount === 1 ? 'élément ajouté' : 'éléments ajoutés'} avec succès`;\n        if (failCount > 0) {\n          message += ` (${failCount} ${failCount === 1 ? 'échec' : 'échecs'})`;\n        }\n        setSuccess(message);\n        \n        // Update existing items for filtering purposes\n        const newExistingItems = [\n          ...existingItems,\n          ...selectedItems.map(item => ({\n            id: item.id,\n            type: itemType\n          }))\n        ];\n        setExistingItems(newExistingItems);\n        \n        // Update available items list\n        setAvailableItems(availableItems.filter(item => \n          !selectedItems.some(selected => selected.id === item.id)\n        ));\n        setFilteredItems(filteredItems.filter(item => \n          !selectedItems.some(selected => selected.id === item.id)\n        ));\n        \n        // Clear selection\n        setSelectedItems([]);\n\n        // Auto-fetch new items of the same type after a short delay\n        setTimeout(() => {\n          fetchItemsByType(itemType);\n        }, 1000);\n      } else if (failCount > 0) {\n        setError(`Échec de l'ajout des éléments. Veuillez réessayer.`);\n      }\n    } catch (err) {\n      console.error('Error in batch add operation:', err);\n      setError('Une erreur est survenue. Veuillez réessayer.');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // Format item details based on type\n  const formatItemDetails = (item) => {\n    switch (itemType) {\n      case 'exercise':\n        return `${item.exercise_level || 'Tous niveaux'} · ${item.exercise_category || 'Non catégorisé'}`;\n      case 'workout':\n        return `${item.workout_category || 'Non catégorisé'}`;\n      case 'plan':\n        return `${item.plan_category || 'Non catégorisé'}`;\n      default:\n        return '';\n    }\n  };\n\n  // Get icon based on type\n  const getItemTypeIcon = () => {\n    switch (itemType) {\n      case 'exercise':\n        return <FaDumbbell className=\"text-primary\" />;\n      case 'workout':\n        return <FaSwimmer className=\"text-info\" />;\n      case 'plan':\n        return <FaCalendarCheck className=\"text-success\" />;\n      default:\n        return <FaListAlt />;\n    }\n  };\n\n  // Debug message for empty items\n  const renderEmptyMessage = () => {\n    return (\n      <div className=\"text-center py-5\">\n        <div className=\"bg-light rounded-circle p-4 d-inline-block mb-3\">\n          {getItemTypeIcon()}\n        </div>\n        \n        <p className=\"text-muted\">\n          {searchTerm \n            ? `Aucun ${itemType === 'exercise' ? 'exercice' : itemType === 'workout' ? 'séance' : 'plan'} ne correspond à votre recherche.` \n            : `Aucun ${itemType === 'exercise' ? 'exercice' : itemType === 'workout' ? 'séance' : 'plan'} disponible à ajouter.`\n          }\n        </p>\n        \n        {!searchTerm && (\n          <div>\n            <div className=\"alert alert-info\">\n              <FaInfoCircle className=\"me-2\" />\n              Si vous êtes administrateur, vérifiez que des {itemType === 'exercise' ? 'exercices' : itemType === 'workout' ? 'séances' : 'plans'} ont été créés dans le système.\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <main className=\"container py-4\">\n        {/* Header */}\n        <div className=\"d-flex justify-content-between align-items-center mb-4\">\n          <div className=\"d-flex align-items-center\">\n            <Link\n              to={`/user/mylists/${id}`}\n              className=\"btn btn-outline-secondary me-3\"\n            >\n              <FaArrowLeft className=\"me-2\" /> Retour à la liste\n            </Link>\n            <div>\n              <h1 className=\"h3 mb-0\">Ajouter des éléments à la liste</h1>\n              {mylist && <p className=\"text-muted mb-0\">{mylist.title}</p>}\n            </div>\n          </div>\n          {selectedItems.length > 0 && (\n            <button\n              className=\"btn btn-primary\"\n              onClick={handleAddItems}\n              disabled={saving || selectedItems.length === 0}\n            >\n              {saving ? (\n                <>\n                  <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                  Ajout en cours...\n                </>\n              ) : (\n                <>\n                  <FaPlus className=\"me-2\" />\n                  Ajouter {selectedItems.length} {selectedItems.length === 1 ? 'élément' : 'éléments'} à la liste\n                </>\n              )}\n            </button>\n          )}\n        </div>\n\n        {/* Feedback messages */}\n        {error && (\n          <div className=\"alert alert-danger\" role=\"alert\">\n            <FaExclamationTriangle className=\"me-2\" /> {error}\n          </div>\n        )}\n\n        {success && (\n          <div className=\"alert alert-success\" role=\"alert\">\n            <FaInfoCircle className=\"me-2\" /> {success}\n          </div>\n        )}\n\n        {/* Item type selection */}\n        <div className=\"card shadow-sm mb-4\">\n          <div className=\"card-header bg-light py-3\">\n            <h2 className=\"h5 mb-0\">Type d'élément</h2>\n          </div>\n          <div className=\"card-body\">\n            <div className=\"row\">\n              <div className=\"col-md-4 mb-3 mb-md-0\">\n                <button\n                  className={`btn btn-lg w-100 h-100 ${itemType === 'exercise' ? 'btn-primary' : 'btn-outline-primary'}`}\n                  onClick={() => handleItemTypeChange('exercise')}\n                >\n                  <FaDumbbell className=\"mb-2 fs-3\" />\n                  <div>Exercices</div>\n                </button>\n              </div>\n              <div className=\"col-md-4 mb-3 mb-md-0\">\n                <button\n                  className={`btn btn-lg w-100 h-100 ${itemType === 'workout' ? 'btn-primary' : 'btn-outline-primary'}`}\n                  onClick={() => handleItemTypeChange('workout')}\n                >\n                  <FaSwimmer className=\"mb-2 fs-3\" />\n                  <div>Séances</div>\n                </button>\n              </div>\n              <div className=\"col-md-4\">\n                <button\n                  className={`btn btn-lg w-100 h-100 ${itemType === 'plan' ? 'btn-primary' : 'btn-outline-primary'}`}\n                  onClick={() => handleItemTypeChange('plan')}\n                >\n                  <FaCalendarCheck className=\"mb-2 fs-3\" />\n                  <div>Plans</div>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Search and filter bar */}\n        <div className=\"card shadow-sm mb-4\">\n          <div className=\"card-body\">\n            <div className=\"row g-3\">\n              <div className=\"col-md-8\">\n                <div className=\"input-group\">\n                  <span className=\"input-group-text bg-light border-light\">\n                    <FaSearch className=\"text-muted\" />\n                  </span>\n                  <input\n                    type=\"text\"\n                    className=\"form-control border-light bg-light\"\n                    placeholder={`Rechercher des ${itemType === 'exercise' ? 'exercices' : itemType === 'workout' ? 'séances' : 'plans'}...`}\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                  />\n                </div>\n              </div>\n              <div className=\"col-md-4\">\n                <div className=\"d-flex gap-2 justify-content-md-end\">\n                  {/* Filter button - functionality can be added later */}\n                  <button className=\"btn btn-outline-secondary\" disabled>\n                    <FaFilter className=\"me-1\" /> Filtrer\n                  </button>\n                  \n                  {/* Refresh button */}\n                  <button \n                    className=\"btn btn-outline-primary\" \n                    onClick={() => fetchItemsByType(itemType)}\n                    disabled={loading}\n                  >\n                    <i className=\"bi bi-arrow-clockwise me-1\"></i> Actualiser\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Items list */}\n        <div className=\"card shadow-sm\">\n          <div className=\"card-header bg-light d-flex justify-content-between align-items-center py-3\">\n            <h2 className=\"h5 mb-0\">\n              {getItemTypeIcon()} {' '}\n              {itemType === 'exercise' ? 'Exercices' : itemType === 'workout' ? 'Séances' : 'Plans'} disponibles\n            </h2>\n            <span className=\"badge bg-primary rounded-pill\">\n              {filteredItems.length} {filteredItems.length === 1 ? 'élément' : 'éléments'}\n            </span>\n          </div>\n          <div className=\"card-body p-0\">\n            {loadingList || loading ? (\n              <div className=\"text-center py-5\">\n                <div className=\"spinner-border text-primary\" role=\"status\">\n                  <span className=\"visually-hidden\">Chargement...</span>\n                </div>\n                <p className=\"mt-3\">Chargement des éléments...</p>\n              </div>\n            ) : filteredItems.length > 0 ? (\n              <div className=\"list-group list-group-flush\">\n                {filteredItems.map((item) => (\n                  <div \n                    key={item.id} \n                    className={`list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3 ${\n                      selectedItems.some(selectedItem => selectedItem.id === item.id) ? 'active' : ''\n                    }`}\n                    onClick={() => toggleItemSelection(item)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    <div className=\"d-flex align-items-center\">\n                      <div className={`rounded-circle p-3 me-3 ${\n                        itemType === 'exercise' ? 'bg-primary-subtle' : \n                        itemType === 'workout' ? 'bg-info-subtle' : \n                        'bg-success-subtle'\n                      }`}>\n                        {getItemTypeIcon()}\n                      </div>\n                      <div>\n                        <h3 className=\"h6 mb-0 fw-bold\">{item.title}</h3>\n                        <p className=\"mb-0 small text-muted\">\n                          {formatItemDetails(item)}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"form-check\">\n                      <input\n                        className=\"form-check-input\"\n                        type=\"checkbox\"\n                        checked={selectedItems.some(selectedItem => selectedItem.id === item.id)}\n                        onChange={() => {}} // onChange needed for controlled component, but logic is in the onClick of the parent div\n                        onClick={(e) => e.stopPropagation()} // Prevent triggering parent onClick\n                      />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              renderEmptyMessage()\n            )}\n          </div>\n        </div>\n        \n        {/* Debug info */}\n        <div className=\"mt-4\">\n          <details className=\"mb-3\">\n            <summary className=\"text-muted small\">Informations de débogage (pour administrateurs)</summary>\n            <div className=\"mt-2 p-3 bg-light rounded small\">\n              <p><strong>État de la page:</strong></p>\n              <ul>\n                <li>Type d'élément sélectionné: {itemType}</li>\n                <li>Éléments disponibles: {availableItems.length}</li>\n                <li>Éléments filtrés: {filteredItems.length}</li>\n                <li>Éléments sélectionnés: {selectedItems.length}</li>\n                <li>Éléments existants dans la liste: {existingItems.length}</li>\n              </ul>\n              \n              <p><strong>Vérifier si les éléments sont bien chargés:</strong></p>\n              <ol>\n                <li>Les requêtes API reçoivent-elles des réponses? Vérifiez dans les outils de développement (F12) → Onglet Réseau.</li>\n                <li>Les endpoints corrects sont-ils appelés? (/api/exercises, /api/workouts, /api/plans)</li>\n                <li>La structure des données est-elle celle attendue? Les objets doivent avoir un champ \"id\" et \"title\".</li>\n              </ol>\n              \n              <p><strong>Conseils si aucun élément n'apparaît:</strong></p>\n              <ol>\n                <li>Vérifiez que des éléments existent dans la base de données.</li>\n                <li>Vérifiez que l'utilisateur a les permissions pour voir ces éléments.</li>\n                <li>Essayez de désactiver temporairement le filtre des éléments déjà dans la liste.</li>\n              </ol>\n            </div>\n          </details>\n        </div>\n        {/* Outil de diagnostic */}\n        {process.env.NODE_ENV === 'development' && (\n  <>\n    <AuthTestComponent />\n    <DataDiagnosticComponent />\n  </>\n)}\n\n      </main>\n    </>\n  );\n};\n\nexport default UserMyListAddItemPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}