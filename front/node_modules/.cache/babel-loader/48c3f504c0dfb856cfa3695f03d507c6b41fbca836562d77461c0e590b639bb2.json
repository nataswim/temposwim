{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/admin/uploads/UploadFormPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { FaArrowLeft, FaSave, FaUpload, FaImage, FaFile, FaVideo, FaMusic, FaTrash } from 'react-icons/fa';\nimport { getUpload, createUpload, updateUpload } from '../../../services/uploads';\nimport { getUsers } from '../../../services/users';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UploadFormPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n\n  // Form state\n  const [formData, setFormData] = useState({\n    filename: '',\n    type: '',\n    user_id: '',\n    file: null\n  });\n\n  // UI states\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [users, setUsers] = useState([]);\n\n  // Load upload data if in edit mode\n  useEffect(() => {\n    const fetchUpload = async () => {\n      if (isEditMode) {\n        try {\n          setLoading(true);\n          const response = await getUpload(id);\n          const uploadData = response.data;\n          setFormData({\n            filename: uploadData.filename || '',\n            type: uploadData.type || '',\n            user_id: uploadData.user_id ? uploadData.user_id.toString() : '',\n            file: null\n          });\n\n          // Set preview for images\n          if (uploadData.type === 'image') {\n            // Construire une URL complète à partir du chemin stocké dans le modèle\n            const baseUrl = 'http://127.0.0.1:8000'; // URL de base API\n            if (uploadData.path) {\n              // Vérifier si le chemin commence par un slash\n              const path = uploadData.path.startsWith('/') ? uploadData.path : `/${uploadData.path}`;\n              setPreview(`${baseUrl}${path}`);\n            }\n          }\n          setLoading(false);\n        } catch (err) {\n          console.error('Error loading upload:', err);\n          setError('Error loading file data');\n          setLoading(false);\n        }\n      }\n    };\n    fetchUpload();\n  }, [id, isEditMode]);\n\n  // Load users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        // Remplacer ceci\n        // const response = await fetch('http://127.0.0.1:8000/api/users');\n        // const data = await response.json();\n\n        // Par ceci\n        const response = await getUsers();\n        const data = response.data;\n        setUsers(data);\n      } catch (err) {\n        console.error(\"Error fetching users:\", err);\n      }\n    };\n    fetchUsers();\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = {\n      'image/jpeg': 'image',\n      'image/png': 'image',\n      'image/gif': 'image',\n      'video/mp4': 'video',\n      'audio/mpeg': 'audio',\n      'application/pdf': 'document'\n    };\n    if (!allowedTypes[file.type]) {\n      setError('Type de fichier non supporté');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (file.size > maxSize) {\n      setError('Le fichier est trop volumineux (max 5MB)');\n      return;\n    }\n    setFormData(prev => ({\n      ...prev,\n      file: file,\n      filename: file.name,\n      type: allowedTypes[file.type]\n    }));\n\n    // Create preview for images\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n\n    // Clear any previous errors\n    setError(null);\n  };\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const formPayload = new FormData();\n      formPayload.append('filename', formData.filename);\n      formPayload.append('type', formData.type);\n      formPayload.append('user_id', formData.user_id);\n      if (formData.file) {\n        formPayload.append('file', formData.file);\n      }\n      if (isEditMode) {\n        await updateUpload(id, formPayload);\n      } else {\n        await createUpload(formPayload);\n      }\n      navigate('/admin/uploads');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error saving file:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Error saving file');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get icon based on file type\n  const getFileIcon = type => {\n    switch (type) {\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(FaImage, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 28\n        }, this);\n      case 'video':\n        return /*#__PURE__*/_jsxDEV(FaVideo, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 28\n        }, this);\n      case 'audio':\n        return /*#__PURE__*/_jsxDEV(FaMusic, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 28\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(FaFile, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline-primary me-3\",\n            onClick: () => navigate('/admin/uploads'),\n            children: [/*#__PURE__*/_jsxDEV(FaArrowLeft, {\n              className: \"me-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), \" Retour\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"h4 mb-0\",\n            children: isEditMode ? \"Modifier le fichier\" : \"Ajouter un fichier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-5\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-primary\",\n            role: \"status\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visually-hidden\",\n              children: \"Chargement...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          encType: \"multipart/form-data\",\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            role: \"alert\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: \"Fichier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card bg-light\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"card-body\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex flex-column align-items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-primary mb-3\",\n                        children: formData.type ? getFileIcon(formData.type) : /*#__PURE__*/_jsxDEV(FaUpload, {\n                          size: 40\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 227,\n                          columnNumber: 75\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 226,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-center mb-3\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                          className: \"mb-1\",\n                          children: formData.file ? formData.file.name : 'Sélectionnez un fichier'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 230,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-muted small mb-0\",\n                          children: \"PNG, JPG, GIF jusqu'\\xE0 5MB\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 233,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 229,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"d-flex gap-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                          className: \"btn btn-primary mb-0\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"file\",\n                            className: \"d-none\",\n                            onChange: handleFileChange,\n                            accept: \"image/*,video/*,audio/*,.pdf\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 239,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(FaUpload, {\n                            className: \"me-2\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 245,\n                            columnNumber: 31\n                          }, this), formData.file ? 'Changer le fichier' : 'Sélectionner un fichier']\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 29\n                        }, this), formData.file && /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"button\",\n                          className: \"btn btn-outline-danger\",\n                          onClick: () => {\n                            setFormData(prev => ({\n                              ...prev,\n                              file: null\n                            }));\n                            setPreview(null);\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(FaTrash, {\n                            className: \"me-2\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 257,\n                            columnNumber: 33\n                          }, this), \"Retirer\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 249,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row g-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"filename\",\n                    className: \"form-label\",\n                    children: \"Nom du fichier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    className: \"form-control\",\n                    id: \"filename\",\n                    name: \"filename\",\n                    value: formData.filename,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      filename: e.target.value\n                    })),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-md-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"type\",\n                    className: \"form-label\",\n                    children: \"Type de fichier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select\",\n                    id: \"type\",\n                    name: \"type\",\n                    value: formData.type,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      type: e.target.value\n                    })),\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"S\\xE9lectionner un type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"image\",\n                      children: \"Image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 293,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"video\",\n                      children: \"Vid\\xE9o\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 294,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"audio\",\n                      children: \"Audio\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 295,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"document\",\n                      children: \"Document\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-12\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"user_id\",\n                    className: \"form-label\",\n                    children: \"Utilisateur\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select\",\n                    id: \"user_id\",\n                    name: \"user_id\",\n                    value: formData.user_id,\n                    onChange: e => setFormData(prev => ({\n                      ...prev,\n                      user_id: e.target.value\n                    })),\n                    required: true,\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"S\\xE9lectionner un utilisateur\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 25\n                    }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: user.id,\n                      children: user.username || user.email\n                    }, user.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: preview && formData.type === 'image' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"card-title mb-3\",\n                    children: \"Aper\\xE7u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 326,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: preview,\n                    alt: \"Preview\",\n                    className: \"img-fluid rounded\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-end mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              disabled: loading || !isEditMode && !formData.file,\n              children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner-border spinner-border-sm me-2\",\n                  role: \"status\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 23\n                }, this), \"Enregistrement...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(FaSave, {\n                  className: \"me-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 23\n                }, this), \" Enregistrer\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadFormPage, \"TAacnapj/EYwLNyzgRckt5wfvYs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = UploadFormPage;\nexport default UploadFormPage;\nvar _c;\n$RefreshReg$(_c, \"UploadFormPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","FaArrowLeft","FaSave","FaUpload","FaImage","FaFile","FaVideo","FaMusic","FaTrash","getUpload","createUpload","updateUpload","getUsers","jsxDEV","_jsxDEV","Fragment","_Fragment","UploadFormPage","_s","id","navigate","isEditMode","formData","setFormData","filename","type","user_id","file","preview","setPreview","loading","setLoading","error","setError","users","setUsers","fetchUpload","response","uploadData","data","toString","baseUrl","path","startsWith","err","console","fetchUsers","handleFileChange","e","target","files","allowedTypes","maxSize","size","prev","name","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","formPayload","FormData","append","_err$response","_err$response$data","message","getFileIcon","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","role","onSubmit","encType","onChange","accept","htmlFor","value","required","map","user","username","email","src","alt","disabled","_c","$RefreshReg$"],"sources":["/Users/mac/Downloads/APP_NS_V1/dev_projet/sauvegardegit/front/src/pages/admin/uploads/UploadFormPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  FaArrowLeft, \n  FaSave, \n  FaUpload, \n  FaImage, \n  FaFile, \n  FaVideo, \n  FaMusic,\n  FaTrash\n} from 'react-icons/fa';\nimport { getUpload, createUpload, updateUpload } from '../../../services/uploads';\nimport { getUsers } from '../../../services/users';\n\n\nconst UploadFormPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const isEditMode = !!id;\n\n  // Form state\n  const [formData, setFormData] = useState({\n    filename: '',\n    type: '',\n    user_id: '',\n    file: null\n  });\n\n  // UI states\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [users, setUsers] = useState([]);\n\n  // Load upload data if in edit mode\n  useEffect(() => {\n    const fetchUpload = async () => {\n      if (isEditMode) {\n        try {\n          setLoading(true);\n          const response = await getUpload(id);\n          const uploadData = response.data;\n          \n          setFormData({\n            filename: uploadData.filename || '',\n            type: uploadData.type || '',\n            user_id: uploadData.user_id ? uploadData.user_id.toString() : '',\n            file: null\n          });\n\n          // Set preview for images\n          if (uploadData.type === 'image') {\n            // Construire une URL complète à partir du chemin stocké dans le modèle\n            const baseUrl = 'http://127.0.0.1:8000'; // URL de base API\n            if (uploadData.path) {\n              // Vérifier si le chemin commence par un slash\n              const path = uploadData.path.startsWith('/') ? uploadData.path : `/${uploadData.path}`;\n              setPreview(`${baseUrl}${path}`);\n            }\n          }\n          \n          setLoading(false);\n        } catch (err) {\n          console.error('Error loading upload:', err);\n          setError('Error loading file data');\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchUpload();\n  }, [id, isEditMode]);\n\n  // Load users\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        // Remplacer ceci\n        // const response = await fetch('http://127.0.0.1:8000/api/users');\n        // const data = await response.json();\n        \n        // Par ceci\n        const response = await getUsers();\n        const data = response.data;\n        \n        setUsers(data);\n      } catch (err) {\n        console.error(\"Error fetching users:\", err);\n      }\n    };\n  \n    fetchUsers();\n  }, []);\n\n  // Handle file selection\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    const allowedTypes = {\n      'image/jpeg': 'image',\n      'image/png': 'image',\n      'image/gif': 'image',\n      'video/mp4': 'video',\n      'audio/mpeg': 'audio',\n      'application/pdf': 'document'\n    };\n\n    if (!allowedTypes[file.type]) {\n      setError('Type de fichier non supporté');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (file.size > maxSize) {\n      setError('Le fichier est trop volumineux (max 5MB)');\n      return;\n    }\n\n    setFormData(prev => ({\n      ...prev,\n      file: file,\n      filename: file.name,\n      type: allowedTypes[file.type]\n    }));\n\n    // Create preview for images\n    if (file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      setPreview(null);\n    }\n\n    // Clear any previous errors\n    setError(null);\n  };\n\n  // Handle form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const formPayload = new FormData();\n      formPayload.append('filename', formData.filename);\n      formPayload.append('type', formData.type);\n      formPayload.append('user_id', formData.user_id);\n      \n      if (formData.file) {\n        formPayload.append('file', formData.file);\n      }\n\n      if (isEditMode) {\n        await updateUpload(id, formPayload);\n      } else {\n        await createUpload(formPayload);\n      }\n\n      navigate('/admin/uploads');\n    } catch (err) {\n      console.error('Error saving file:', err);\n      setError(err.response?.data?.message || 'Error saving file');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Get icon based on file type\n  const getFileIcon = (type) => {\n    switch (type) {\n      case 'image': return <FaImage size={40} />;\n      case 'video': return <FaVideo size={40} />;\n      case 'audio': return <FaMusic size={40} />;\n      default: return <FaFile size={40} />;\n    }\n  };\n\n  return (\n    <div className=\"container py-4\">\n      <div className=\"card shadow\">\n        <div className=\"card-header bg-white\">\n          <div className=\"d-flex align-items-center\">\n            <button \n              className=\"btn btn-outline-primary me-3\"\n              onClick={() => navigate('/admin/uploads')}\n            >\n              <FaArrowLeft className=\"me-2\" /> Retour\n            </button>\n            <h1 className=\"h4 mb-0\">\n              {isEditMode ? \"Modifier le fichier\" : \"Ajouter un fichier\"}\n            </h1>\n          </div>\n        </div>\n\n        <div className=\"card-body\">\n          {loading ? (\n            <div className=\"text-center py-5\">\n              <div className=\"spinner-border text-primary\" role=\"status\">\n                <span className=\"visually-hidden\">Chargement...</span>\n              </div>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\">\n              {error && (\n                <div className=\"alert alert-danger\" role=\"alert\">\n                  {error}\n                </div>\n              )}\n\n              <div className=\"row\">\n                <div className=\"col-md-8\">\n                  {/* File Upload */}\n                  <div className=\"mb-4\">\n                    <label className=\"form-label\">Fichier</label>\n                    <div className=\"card bg-light\">\n                      <div className=\"card-body\">\n                        <div className=\"d-flex flex-column align-items-center\">\n                          <div className=\"text-primary mb-3\">\n                            {formData.type ? getFileIcon(formData.type) : <FaUpload size={40} />}\n                          </div>\n                          <div className=\"text-center mb-3\">\n                            <h5 className=\"mb-1\">\n                              {formData.file ? formData.file.name : 'Sélectionnez un fichier'}\n                            </h5>\n                            <p className=\"text-muted small mb-0\">\n                              PNG, JPG, GIF jusqu'à 5MB\n                            </p>\n                          </div>\n                          <div className=\"d-flex gap-2\">\n                            <label className=\"btn btn-primary mb-0\">\n                              <input\n                                type=\"file\"\n                                className=\"d-none\"\n                                onChange={handleFileChange}\n                                accept=\"image/*,video/*,audio/*,.pdf\"\n                              />\n                              <FaUpload className=\"me-2\" />\n                              {formData.file ? 'Changer le fichier' : 'Sélectionner un fichier'}\n                            </label>\n                            {formData.file && (\n                              <button\n                                type=\"button\"\n                                className=\"btn btn-outline-danger\"\n                                onClick={() => {\n                                  setFormData(prev => ({...prev, file: null}));\n                                  setPreview(null);\n                                }}\n                              >\n                                <FaTrash className=\"me-2\" />\n                                Retirer\n                              </button>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* File Details */}\n                  <div className=\"row g-3\">\n                    <div className=\"col-md-6\">\n                      <label htmlFor=\"filename\" className=\"form-label\">Nom du fichier</label>\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"filename\"\n                        name=\"filename\"\n                        value={formData.filename}\n                        onChange={(e) => setFormData(prev => ({ ...prev, filename: e.target.value }))}\n                        required\n                      />\n                    </div>\n\n                    <div className=\"col-md-6\">\n                      <label htmlFor=\"type\" className=\"form-label\">Type de fichier</label>\n                      <select\n                        className=\"form-select\"\n                        id=\"type\"\n                        name=\"type\"\n                        value={formData.type}\n                        onChange={(e) => setFormData(prev => ({ ...prev, type: e.target.value }))}\n                        required\n                      >\n                        <option value=\"\">Sélectionner un type</option>\n                        <option value=\"image\">Image</option>\n                        <option value=\"video\">Vidéo</option>\n                        <option value=\"audio\">Audio</option>\n                        <option value=\"document\">Document</option>\n                      </select>\n                    </div>\n\n                    <div className=\"col-12\">\n                      <label htmlFor=\"user_id\" className=\"form-label\">Utilisateur</label>\n                      <select\n                        className=\"form-select\"\n                        id=\"user_id\"\n                        name=\"user_id\"\n                        value={formData.user_id}\n                        onChange={(e) => setFormData(prev => ({ ...prev, user_id: e.target.value }))}\n                        required\n                      >\n                        <option value=\"\">Sélectionner un utilisateur</option>\n                        {users.map(user => (\n                          <option key={user.id} value={user.id}>\n                            {user.username || user.email}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"col-md-4\">\n                  {/* Preview */}\n                  {preview && formData.type === 'image' && (\n                    <div className=\"card\">\n                      <div className=\"card-body\">\n                        <h5 className=\"card-title mb-3\">Aperçu</h5>\n                        <img \n                          src={preview} \n                          alt=\"Preview\" \n                          className=\"img-fluid rounded\"\n                        />\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"d-flex justify-content-end mt-4\">\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  disabled={loading || (!isEditMode && !formData.file)}\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                      Enregistrement...\n                    </>\n                  ) : (\n                    <>\n                      <FaSave className=\"me-2\" /> Enregistrer\n                    </>\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadFormPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}